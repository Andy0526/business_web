{% extends "info_header.html" %}

{% block body %}

    <script>
        // 页面加载后
        /* $(document).ready(function () {
         // 处理文本中的换行和空格
         $(".panel-body").each(
         function () {
         var content = $(this).text();
         content = content.replace(new RegExp("#n#", "gm"), "<br>");
         content = content.replace(new RegExp(" ", "gm"), "&nbsp;")
         $(this).html(content);
         }
         )
         });*/
    </script>

    <!-- 显示导航栏 -->
    <div class="container" style="margin-top: 70px">

        <ol class="breadcrumb">
            <li><a href="/info">资讯</a></li>
            <li id="type" class="active">{{ type }}</li>
        </ol>


        <div id="show" class="list-group" style="margin-top: -5px">

        </div>
        <script>
            // 加载数据
            // 加载数据
            $(document).ready(function () {
                var type = $("#type").text();
                $.getJSON("/info/" + type + "/list/60", function (data) {
                    $('#show').html("");
                    for (var i = 0; i < data.type_list.length; ++i) {
                        var item = data.type_list[i];
                           if (type == 'ugc') {
                                    $('#show').append(
                                        "<a href='/info/" + type + "/" + item.item_id + "' class='list-group-item'>" +
                                        "<div class='row'>" +
                                        "<div class='col-md-9'>" +
                                             "<strong>Q: </strong>&nbsp&nbsp" + item.title + "</div>" +
                                        "</div>" +
                                        "<div class='row' style='margin-top:5px'>" +
                                        "<div class='col-md-9' style='white-space:nowrap;overflow:hidden;text-overflow:ellipsis;'>" +
                                            "<strong>A: </strong>&nbsp&nbsp" + item.content + "</div>" +
                                         "<div class='col-md-1'>" + item.author + "</div>" +
                                        "<div class='col-md-2'>" + item.item_pub_time + "</div>" +
                                        "</div>" +
                                        "</a>"
                                    );
                                } else {
                               $('#show').append(
                                       "<a href='/info/" + type + "/" + item.item_id + "' class='list-group-item'>" +
                                       "<div class='row'>" +
                                       "<div class='col-md-8'>" + item.title + "</div>" +
                                       "<div class='col-md-2'>" + item.author + "</div>" +
                                       "<div class='col-md-2'>" + item.item_pub_time + "</div>" +
                                       "</div>" +
                                       "</a>"
                               );
                           }
                    }
                });

                type = $("#type").text();
                if (type == 'news')
                    $("#type").text("新闻")
                else if (type == 'policy')
                    $("#type").text("政策")
                else if (type == 'opinion')
                   $("#type").text("观点")
                else if (type == 'ugc')
                   $("#type").text("用户评论")

            });
        </script>
    </div>


{% endblock %}